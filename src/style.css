:root {
    /* ── Colors: Background & Surface ── */
    --color-bg: #0e0e10;
    --color-surface: #1a1a1f;
    --color-surface-raised: #242429;

    /* ── Colors: Text ── */
    --color-text: #e8e6e3;
    --color-text-muted: #9a9a9e;
    --color-text-inverse: #0e0e10;

    /* ── Colors: Work Mode (red-orange) ── */
    --color-work: #e8643a;
    --color-work-dim: #b34425;
    --color-work-glow: rgba(232, 100, 58, 0.25);

    /* ── Colors: Break Mode (blue-green) ── */
    --color-break: #38b2a3;
    --color-break-dim: #268079;
    --color-break-glow: rgba(56, 178, 163, 0.25);

    /* ── Colors: Accent / Interactive ── */
    --color-accent: #7b8cff;
    --color-accent-dim: #5563c4;

    /* ── Colors: Semantic ── */
    --color-danger: #e8643a;
    --color-success: #38b2a3;

    /* ── Colors: Border ── */
    --color-border: #2e2e35;
    --color-border-focus: #7b8cff;

    /* ── Spacing Scale ── */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 16px;
    --space-lg: 24px;
    --space-xl: 40px;

    /* ── Typography: Font Families ── */
    --font-body: 'Inter', 'Segoe UI', system-ui, sans-serif;
    --font-mono: 'Overpass Mono', 'Fira Code', 'Courier New', monospace;

    /* ── Typography: Font Sizes ── */
    --text-xs: 0.75rem;
    /* 12px */
    --text-sm: 0.875rem;
    /* 14px */
    --text-base: 1rem;
    /* 16px */
    --text-lg: 1.25rem;
    /* 20px */
    --text-xl: 1.5rem;
    /* 24px */
    --text-2xl: 2rem;
    /* 32px */
    --text-timer: 4.5rem;
    /* 72px — main countdown display */

    /* ── Typography: Font Weights ── */
    --weight-normal: 400;
    --weight-medium: 500;
    --weight-semibold: 600;
    --weight-bold: 700;

    /* ── Typography: Line Heights ── */
    --leading-tight: 1.2;
    --leading-normal: 1.5;
    --leading-relaxed: 1.75;

    /* ── Border Radius ── */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-full: 9999px;
}

/* ── Base ── */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-body);
    background-color: var(--color-bg);
    color: var(--color-text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

#app {
    display: flex;
    flex-direction: column;
    flex: 1;
    position: relative;
    z-index: 1;
}

/* ── Top Bar ── */
.top-bar {
    position: relative;
    background-color: var(--color-bg);
    z-index: 2;
}

/* ── App Header ── */
.app-header {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    padding: var(--space-md) var(--space-lg);
}

.app-title {
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    transition: color 0.3s;
}

.app-header-left {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.settings-saved-msg {
    font-size: var(--text-xs);
    color: var(--color-success);
    opacity: 0;
    transition: opacity 0.3s;
}

.settings-saved-msg--visible {
    opacity: 1;
}

.app-header-right {
    display: flex;
    justify-content: flex-end;
}

/* ── Main ── */
.main {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-xl);
    position: relative;
    overflow: hidden;
    --fill-color: rgb(232, 100, 58);
    --fill-pct: 1;
}

/* ── Hourglass Fill ── */
.main::before {
    content: '';
    position: absolute;
    inset: 0;
    z-index: 0;
    background: linear-gradient(
        to bottom,
        color-mix(in srgb, var(--fill-color), white 8%) 0%,
        var(--fill-color) 40%,
        color-mix(in srgb, var(--fill-color), black 12%) 100%
    );
    transform: scaleY(var(--fill-pct, 1));
    transform-origin: bottom center;
    transition: transform 1s linear, background 0.4s ease, opacity 0.3s ease;
    will-change: transform;
    pointer-events: none;
}

.main--paused::before {
    opacity: 0.35;
}

.main.hourglass-refill::before {
    transition: background 0.8s ease;
}

/* ── Timer Container ── */
.timer-container {
    padding: var(--space-xl);
    text-align: center;
    position: relative;
    z-index: 1;
}

/* ── Mode Themes ── */
#app[data-mode="work"] .app-title {
    color: var(--color-work);
}

#app[data-mode="break"] .app-title {
    color: var(--color-break);
}

#app[data-mode="work"] .time-display,
#app[data-mode="break"] .time-display {
    color: #fff;
    text-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
}

/* ── Time Display ── */
.time-display {
    font-family: var(--font-mono);
    font-size: var(--text-timer);
    font-weight: var(--weight-bold);
    line-height: var(--leading-tight);
    color: var(--color-text);
    margin-bottom: var(--space-xl);
    transition: color 0.3s, text-shadow 0.3s, opacity 0.3s;
}


/* ── Buttons ── */
.btn {
    border: none;
    border-radius: var(--radius-md);
    padding: var(--space-sm) var(--space-lg);
    font-size: var(--text-base);
    font-weight: var(--weight-semibold);
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s;
}

.btn-icon {
    width: 56px;
    height: 56px;
    border-radius: var(--radius-full);
    background: transparent;
    border: 1.5px solid rgba(255, 255, 255, 0.35);
    color: rgba(255, 255, 255, 0.35);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    padding: 0;
    transition: border-color 0.2s, color 0.2s;
}

/* Running state: subdued, brightens fully on hover */
.btn-icon:hover {
    border-color: rgba(255, 255, 255, 1);
    color: rgba(255, 255, 255, 1);
}

/* Paused state: icon prominent, border stays subtle */
.btn-icon--paused {
    color: rgba(255, 255, 255, 1);
    border-color: rgba(255, 255, 255, 0.35);
}

.btn-icon--paused:hover {
    border-color: rgba(255, 255, 255, 0.6);
    color: rgba(255, 255, 255, 1);
}

.btn-ghost {
    background: transparent;
    border: none;
    color: var(--color-text-muted);
    font-size: var(--text-sm);
    padding: var(--space-xs) var(--space-sm);
    transition: color 0.2s;
}

.btn-ghost:hover {
    color: var(--color-text);
}

.btn-ghost--danger:hover {
    color: var(--color-danger);
}

/* ── Settings Panel ── */
.settings-panel {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 10;
    background-color: rgba(14, 14, 16, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.settings-panel--open {
    max-height: 300px;
}

.settings-panel__inner {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--space-md);
    padding: var(--space-md) var(--space-lg);
}

.settings-field {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.settings-label {
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    font-weight: var(--weight-medium);
    white-space: nowrap;
}

.settings-input {
    background: var(--color-surface-raised);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    font-size: var(--text-base);
    padding: var(--space-sm) var(--space-md);
    outline: none;
    transition: border-color 0.2s;
    width: 72px;
}

.settings-input:focus {
    border-color: var(--color-border-focus);
}

/* ── Session History Dots ── */
.session-history {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--space-sm);
    padding: var(--space-md) var(--space-lg) var(--space-xl);
}

.session-dot {
    font-size: 14px;
    flex-shrink: 0;
}

.session-dot--work {
    color: rgba(255, 255, 255, 0.3);
}

.session-dot--break {
    color: rgba(255, 255, 255, 0.3);
}

#app[data-mode="work"] .session-dot--active,
#app[data-mode="break"] .session-dot--active {
    color: #fff;
    filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.5));
}
